<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Konverter Satuan - Portal Utilitas</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body class="konverter-satuan-page">
    <div class="container">
        <h1>Konverter Satuan</h1>
        <div class="converter-form">
            <div class="form-group">
                <label for="category">Pilih Kategori:</label>
                <select id="category">
                    <option value="length">Panjang</option>
                    <option value="weight">Berat</option>
                    <option value="temperature">Suhu</option>
                    <option value="volume">Volume</option>
                </select>
            </div>
            <div class="form-group">
                <label for="inputValue">Nilai:</label>
                <input type="number" id="inputValue" placeholder="Masukkan nilai">
            </div>
            <div class="form-group-inline">
                <div class="form-group">
                    <label for="fromUnit">Dari Satuan:</label>
                    <select id="fromUnit"></select>
                </div>
                <div class="form-group">
                    <label for="toUnit">Ke Satuan:</label>
                    <select id="toUnit"></select>
                </div>
            </div>
            <button onclick="convertUnits()">Konversi</button>
            <div class="result-area">
                <h2>Hasil:</h2>
                <p id="conversionResult">-</p>
            </div>
        </div>
        <div class="footer"><a href="index.html" class="back-link">Kembali ke Menu Utama</a></div>
    </div>

    <script>
        const units = {
            length: {
                meter: { name: 'Meter (m)', to_base: 1 },
                kilometer: { name: 'Kilometer (km)', to_base: 1000 },
                centimeter: { name: 'Sentimeter (cm)', to_base: 0.01 },
                millimeter: { name: 'Milimeter (mm)', to_base: 0.001 },
                mile: { name: 'Mil (mi)', to_base: 1609.34 },
                yard: { name: 'Yard (yd)', to_base: 0.9144 },
                foot: { name: 'Kaki (ft)', to_base: 0.3048 },
                inch: { name: 'Inci (in)', to_base: 0.0254 }
            },
            weight: {
                kilogram: { name: 'Kilogram (kg)', to_base: 1 },
                gram: { name: 'Gram (g)', to_base: 0.001 },
                milligram: { name: 'Miligram (mg)', to_base: 0.000001 },
                pound: { name: 'Pon (lb)', to_base: 0.453592 },
                ounce: { name: 'Ons (oz)', to_base: 0.0283495 },
                ton_metric: { name: 'Ton Metrik', to_base: 1000}
            },
            temperature: { // Special handling for temperature
                celsius: { name: 'Celsius (°C)' },
                fahrenheit: { name: 'Fahrenheit (°F)' },
                kelvin: { name: 'Kelvin (K)' }
            },
            volume: {
                liter: { name: 'Liter (L)', to_base: 1 },
                milliliter: { name: 'Mililiter (mL)', to_base: 0.001 },
                gallon_us: { name: 'Galon AS (gal)', to_base: 3.78541 },
                quart_us: { name: 'Kuart AS (qt)', to_base: 0.946353},
                cubic_meter: {name: 'Meter Kubik (m³)', to_base: 1000}
            }
        };

        const categorySelect = document.getElementById('category');
        const fromUnitSelect = document.getElementById('fromUnit');
        const toUnitSelect = document.getElementById('toUnit');
        const inputValue = document.getElementById('inputValue');
        const conversionResult = document.getElementById('conversionResult');

        function populateUnits() {
            const selectedCategory = categorySelect.value;
            const currentUnits = units[selectedCategory];

            fromUnitSelect.innerHTML = '';
            toUnitSelect.innerHTML = '';

            for (const unitKey in currentUnits) {
                const option1 = document.createElement('option');
                option1.value = unitKey;
                option1.textContent = currentUnits[unitKey].name;
                fromUnitSelect.appendChild(option1);

                const option2 = document.createElement('option');
                option2.value = unitKey;
                option2.textContent = currentUnits[unitKey].name;
                toUnitSelect.appendChild(option2);
            }
        }

        categorySelect.addEventListener('change', populateUnits);

        function convertUnits() {
            const category = categorySelect.value;
            const from = fromUnitSelect.value;
            const to = toUnitSelect.value;
            const value = parseFloat(inputValue.value);

            if (isNaN(value)) {
                conversionResult.textContent = "Masukkan nilai yang valid.";
                return;
            }

            let result;

            if (category === 'temperature') {
                if (from === 'celsius') {
                    if (to === 'fahrenheit') result = (value * 9/5) + 32;
                    else if (to === 'kelvin') result = value + 273.15;
                    else result = value; // C to C
                } else if (from === 'fahrenheit') {
                    if (to === 'celsius') result = (value - 32) * 5/9;
                    else if (to === 'kelvin') result = ((value - 32) * 5/9) + 273.15;
                    else result = value; // F to F
                } else if (from === 'kelvin') {
                    if (to === 'celsius') result = value - 273.15;
                    else if (to === 'fahrenheit') result = ((value - 273.15) * 9/5) + 32;
                    else result = value; // K to K
                }
                conversionResult.textContent = `${result.toFixed(2)} ${units[category][to].name.split(' ')[1] || ''}`;
            } else {
                const fromUnitInfo = units[category][from];
                const toUnitInfo = units[category][to];
                
                const valueInBase = value * fromUnitInfo.to_base;
                result = valueInBase / toUnitInfo.to_base;
                conversionResult.textContent = `${result.toFixed(5)} ${toUnitInfo.name.split('(')[0].trim()}`;
            }
        }

        // Initialize
        populateUnits();
    </script>
</body>
</html>